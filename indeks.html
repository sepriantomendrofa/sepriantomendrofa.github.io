<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Absensi Student Labor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="A/plugins/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="A/dist/css/adminlte.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
</head>

<body class="hold-transition sidebar-mini">
  <div class="wrapper">
    <nav class="main-header navbar navbar-expand navbar-white navbar-light">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="A/index3.html" class="nav-link">Home</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="#" class="nav-link">Contact</a>
        </li>
      </ul>

      <form class="form-inline ml-3">
        <div class="input-group input-group-sm">
          <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
          <div class="input-group-append">
            <button class="btn btn-navbar" type="submit">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </form>
    </nav>
  </div>

  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <a class="brand-link">
      <img src="A/dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3"
        style="opacity: .8">
      <span class="brand-text font-weight-light text-white">Kafetaria</span>
    </a>


    <div class="sidebar">
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="succesful.jpg" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a class="d-block">Seprianto</a>
        </div>
      </div>


      <nav class="mt-2">
        <ul class="nav nav-pill nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <li class="nav-item">
            <a href="LoginAdmin.html" class="nav-link">
              <p>
                Admin
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="indeks.html" class="nav-link">
              <p>
                Student Labor
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="Absensi.html" class="nav-link">
              <p>
                Absensi
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="Grade.html" class="nav-link">
              <p>
                Grade
              </p>
            </a>
          </li>

        </ul>
      </nav>
    </div>
  </aside>

  <div class="content-wrapper">
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><span class="text-primary">Home</span></li>
              <li class="breadcrumb-item active">Blank Page</li>
            </ol>
          </div>
        </div>
      </div>
    </section>

    <div id="app">

      <div class="container mt-3">
        
        
      </div> 
      <!-- The Modal -->
      <div class="modal fade" id="createUserModalCenter" tabindex="-1" role="dialog" aria-labelledby="createUserModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="createUserModalLongTitle">Isi Data</h5>
            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
      
            <!-- Modal body -->
            <div class="modal-body">
              <form>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="nama">Nama</label>
                    <input v-model="nama" type="text" class="form-control" id="nama" placeholder="" value="" required>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="nim">Nim</label>
                  <div class="input-group">
                    <input v-model="nim" type="text" class="form-control" id="nim" placeholder="nim"
                      required>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="jenis_kelamin">Jenis_kelamin</label>
                  <form action="#">
                      <div class="form-check">
                          <input v-model="jenis_kelamin" type="radio" class="form-check-input" id="radio1" name="optradio" value="laki-laki" checked>
                          <label class="form-check-label" for="laki-laki"> Laki-Laki</label>
                      </div>
                      <div class="form-check">
                          <input v-model="jenis_kelamin" type="radio" class="form-check-input" id="radio2" name="optradio" value="perempuan">
                          <label class="form-check-label" for="perempuan">Perempuan</label>
                      </div>
                      
                  </form>
                </div>
                <div class="mb-3">
                  <label for="pekerjaan">Pekerjaan</label>
                  <div class="input-group">
                    <input v-model="pekerjaan" type="text" class="form-control" id="pekerjaan" placeholder="pekerjaan"
                      required>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="tingkat">Tingkat</label>
                  <div class="input-group">
                    <input v-model="tingkat" type="text" class="form-control" id="tingkat" placeholder="tingkat"
                      required>
                  </div>
                </div>
              </form>
            </div>
      
            <!-- Modal footer -->
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary" data-bs-dismiss="modal" v-on:click="createUser" >submit</button>
  
            </div>
      
          </div>
        </div>
      </div>
  
      <!-- Modal update -->
      <div class="modal fade" id="updateUserModalCenter" tabindex="-1" aria-labelledby="updateUserModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="updateUserModalCenterTitle">Isi Data</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="nama">Nama</label>
                      <input v-model="nama" type="text" class="form-control" id="namaUpdate" placeholder="" value="" required>
                  </div>
                </div>
          
                <div class="mb-3">
                  <label for="nim">Nim</label>
                  <div class="input-group">
                    <input v-model="nim" type="text" class="form-control" id="nimUpdate" placeholder="nim" required>
                  </div>
                </div>

                <div class="mb-3">
                  <label for="jenis_kelamin">Jenis_kelamin</label>
                  <form action="#">
                    <div class="form-check">
                      <input v-model="jenis_kelamin" type="radio" class="form-check-input" id="radio1" name="optradio" value="laki-laki" checked>
                      <label class="form-check-label" for="laki-laki"> Laki-Laki</label>
                    </div>
                    <div class="form-check">
                      <input v-model="jenis_kelamin" type="radio" class="form-check-input" id="radio2" name="optradio" value="perempuan">
                      <label class="form-check-label" for="perempuan">Perempuan</label>
                    </div>
                
                  </form>
                </div>
                <div class="mb-3">
                  <label for="pekerjaan">Pekerjaan</label>
                  <div class="input-group">
                    <input v-model="pekerjaan" type="text" class="form-control" id="pekerjaanUpdate" placeholder="pekerjaan" required>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="tingkat">Tingkat</label>
                  <div class="input-group">
                    <input v-model="tingkat" type="text" class="form-control" id="tingkatUpdate" placeholder="tingkat" required>
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
    
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-dark" data-bs-dismiss="modal" v-on:click="updateUser(user)">update </button>
            </div>
          </div>
        </div>
      </div>
      
  
  
  <!-- Modal -->
      <div class="modal fade" id="deleteUserModalCenter" tabindex="-1" aria-labelledby="deleteUserModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="deleteUserModalCenterTitle">Confirm data deletion</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Are you sure want to delete this entry?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal">no</button>
              <button type="submit" class="btn btn-dark" data-bs-dismiss="modal" v-on:click="deleteUser">yes</button>
            </div> 
          </div>
        </div>
      </div>
 
      <div class="container">
        <div class="col-md-12">
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createUserModalCenter">
            Add Data
          </button>
        </div>
        <table class="table table-striped">
          <br>

          <tr>
            <th>ID</th>
            <th>Nama</th>
            <th>Nim</th>
            <th>Jenis_kelamin</th>
            <th>Pekerjaan</th>
            <th>Tingkat</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
            <tr v-for="user in users">
            <td>{{ user.id }}</td>
            <td>{{ user.nama }}</td>
            <td>{{ user.nim }}</td>
            <td>{{ user.jenis_kelamin }}</td>
            <td>{{ user.pekerjaan }}</td>
            <td>{{ user.tingkat }}</td>

          <td><button class="btn btn-md btn-dark " data-bs-toggle="modal" data-bs-target="#updateUserModalCenter" v-on:click="getEdit(user)"><i class='fas fa-pen'
            style='font-size:10px'></i</button></td>
          <td><button class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#deleteUserModalCenter" v-on:click="getDelete(user)"><i class='fas fa-close'
            style='font-size:10px'></i> </button></td>
         
    
        </table>

   
      </div>
    </div>


    <!-- Axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
      var app = new Vue({
        el: '#app',
        data: {
          errors: [],
          message: null,
          users: [],
          userIdEdit: null,
          userIdDelete: null,
          editMode: false,
          deleteMode: false,
          nama: '',
          nim: '',
          jenis_kelamin:'',
          pekerjaan: '',
          tingkat:'',
          
        },
        mounted: function () {
          this.getUser();
        },
        methods: {
          getUser() {
            axios.get('https://621a28b181d4074e85bae85e.mockapi.io/Absensi/Student_labour')
              .then(response => {
                this.users = response.data;
                console.log(response);
              })
              .catch(error => {
                console.log(error);
              });
          },
          createUser: function () {
            var createUserModalCenter = document.getElementById('createUserModalCenter')

            axios.post('https://621a28b181d4074e85bae85e.mockapi.io/Absensi/Student_labour', {
                nama: this.nama,
                nim: this.nim,
                jenis_kelamin: this.jenis_kelamin,
                pekerjaan: this.pekerjaan,
                tingkat: this.tingkat,
              })
              .then(response => {
                this.getUser();
                swal('created', 'Berhasil Menambah Data', 'success')
                this.resetForm();
                console.log(response);
              })
              .catch(error => {
                console.log(error);
              });
          },
          resetForm: function () {
            this.editMode = false;
            this.deleteMode = false;
            this.userIdEdit = null;
            this.nama = null;
            this.nim = null;
            this.jenis_kelamin = null;
            this.pekerjaan = null;
            this.tingkat = null;
          },
          getEdit: function (user) {
            var updateUserModalCenter = document.getElementById('updateUserModalCenter');
            this.message = null;
            this.editMode = true;
            this.deleteMode = false;
            this.userIdEdit = user.id;
            this.nama = user.nama;
            this.nim = user.nim;
            this.jenis_kelamin = user.jenis_kelamin;
            this.pekerjaan = user.pekerjaan;
            this.tingkat = user.tingkat;
          },
          getDelete: function (user) {
            var deleteUserModalCenter = document.getElementById('deleteUserModalCenter');
            this.message = null;
            this.deleteMode = true;
            this.editMode = false;
            this.userIdDelete = user.id;
            this.namaUpdate = user.nama;
            this.nimUpdate = user.nim;
            this.jenis_kelaminUpdate = user.jenis_kelamin;
            this.pekerjaanUpdate = user.pekerjaan;
            this.tingkatUpdate = user.tingkat;
          },
          updateUser: function () {
            axios.put(
                `https://621a28b181d4074e85bae85e.mockapi.io/Absensi/Student_labour/${this.userIdEdit}`, {
                  nama: this.nama,
                  nim: this.nim,
                  jenis_kelamin: this.jenis_kelamin,
                  pekerjaan: this.pekerjaan,
                  tingkat: this.tingkat,
                })
              .then(res => {
                swal('created', 'Berhasil Update Data', 'success')
                var updateUserModalCenter = document.getElementById('updateUserModalCenter');
                this.resetForm();
                this.getUser();
              })
              .catch(err => {
                console.log(err);
              })
          },
          deleteUser: function () {
            axios.delete(
                `https://621a28b181d4074e85bae85e.mockapi.io/Absensi/Student_labour/${this.userIdDelete}`)
              .then(res => {
                swal('created', 'Berhasil Menghapus Data', 'success')
                var deleteUserModalCenter = document.getElementById('deleteUserModalCenter');
                this.resetForm();
                this.getUser();
              })
              .catch(err => {
                console.log(err);
              })
          }
        }
      })
    </script>

    <div class="card fixed-bottom">
      <footer class="main-footer">
        <div class="float-right d-none d-sm-block">
          <b>Version</b> 4.0.1
        </div>
        <strong>Copyright &copy; 2014-2022 <a href="http://adminlte.io" style="text-decoration:none">AdminLTE.io</a>.</strong> All rights
        reserved.
      </footer>
      <aside class="control-sidebar control-sidebar-dark">
      </aside>
    </div>
    <script src="A/plugins/jquery/jquery.min.js"></script>
    <script src="A/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="A/dist/js/adminlte.min.js"></script>
    <script src="A/dist/js/demo.js"></script>
</body>

</html>